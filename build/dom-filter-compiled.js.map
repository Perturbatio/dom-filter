{"version":3,"sources":["../src/dom-filter.js"],"names":[],"mappings":"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","file":"dom-filter-compiled.js","sourcesContent":["/**\n *\n */\nclass DomFilter {\n\t/**\n\t *\n\t * @returns {Object}\n\t */\n\tget strings() {\n\t\tvar me = this;\n\t\tif ( typeof me._strings === 'undefined' ) {\n\t\t\tme._strings = DomFilter._getDefaultLangStrings();\n\t\t}\n\t\treturn me._strings;\n\t}\n\n\t/**\n\t *\n\t * @param {Object} value\n\t */\n\tset strings( value ) {\n\t\tthis._strings = value;\n\t}\n\n\t/**\n\t *\n\t * @returns {string}\n\t */\n\tget defaultLanguage() {\n\t\tvar me = this;\n\t\tif ( typeof me._defaultLang !== 'string' ) {\n\t\t\tme._defaultLang = 'en';\n\t\t}\n\t\treturn me._defaultLang || '';\n\t}\n\n\t/**\n\t *\n\t * @param {string} value\n\t */\n\tset defaultLanguage( value ) {\n\t\tif ( typeof value === 'string' ) {\n\t\t\tthis._defaultLang = value;\n\t\t}\n\t}\n\n\t/**\n\t *\n\t * @returns {Element}\n\t */\n\tget feedbackElement() {\n\t\treturn this.filterContainer.querySelector(this._config.feedbackElement);\n\t}\n\n\t/**\n\t *\n\t * @param {string|Element} value\n\t */\n\tset feedbackElement( value ) {\n\t\tthis._config.feedbackElement = value;\n\t}\n\n\t/**\n\t * Get the default language strings for the class\n\t *\n\t * @returns {Object}\n\t * @private\n\t */\n\tstatic _getDefaultLangStrings() {\n\t\treturn {\n\t\t\t'en': {\n\t\t\t\t'feedback': {\n\t\t\t\t\t'no_results'              : 'No results',\n\t\t\t\t\t'default_feedback_message': ''\n\t\t\t\t},\n\t\t\t\t'input'   : {\n\t\t\t\t\t'placeholder': 'Filter',\n\t\t\t\t\t'label'      : 'Filter this list:'\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t}\n\n\t/**\n\t * Return all strings for a given language\n\t *\n\t * @param {String} lang defaults to 'en'\n\t * @returns {*}\n\t */\n\tgetLangStrings( lang ) {\n\t\tvar me = this;\n\t\tlang = lang || 'en';\n\t\tif ( typeof lang !== 'string' || !me.strings.hasOwnProperty(lang) ) {\n\t\t\treturn {};\n\t\t}\n\t\treturn me.strings[lang];\n\t}\n\n\t/**\n\t *\n\t * @param {Object} config\n\t */\n\tconstructor( config ) {\n\t\tvar me = this;\n\n\t\tme._config = config || {};\n\t\tme._initialConfig = me._config;\n\t\tif (typeof me._config.strings !== 'undefined'){\n\t\t\tme.strings = me._config.strings;\n\t\t}\n\n\t\tme._config.feedbackElement = me._config.feedbackElement || '.feedback';\n\t\tme._config.containerClass = me._config.containerClass || 'element-filter';\n\n\t\tme._config.filterTemplate = me._config.filterTemplate || '<div class=\"' + me._config.containerClass + '\">' +\n\t\t\t'<label>{{input.label}}<input type=\"text\" placeholder=\"{{input.placeholder}}\"></label>' +\n\t\t\t'<div class=\"feedback\"></div>' +\n\t\t\t'</div>';\n\t\tme._config.inputElement = me._config.inputElement || '.element-filter input';\n\t\tme._filterNodes = document.querySelectorAll(me._config.filterNodes);\n\t\tme._hideFunction = me._config.hideFunction || DomFilter._fnHideNodes;\n\t\tme._showFunction = me._config.showFunction || DomFilter._fnShowNodes;\n\t\tme._matchFunction = me._config.matchFunction || DomFilter._fnMatchNode;\n\n\t\tme.createFilterElement();\n\t\tme.registerListeners();\n\t}\n\n\t/**\n\t *\n\t */\n\tregisterListeners() {\n\t\tvar me = this;\n\t\tme.inputElement.addEventListener('keypress', ( e ) => me._onFilterChange(e));\n\t\tme.inputElement.addEventListener('change', ( e ) => me._onFilterChange(e));\n\t\tme.inputElement.addEventListener('input', ( e ) => me._onFilterChange(e));\n\t}\n\n\t/**\n\t * The default method of showing a node\n\t * removes aria-hidden attribute to each\n\t *\n\t * @param nodes\n\t * @private\n\t */\n\tstatic _fnShowNodes( nodes ) {\n\t\t[].forEach.call(nodes, function ( node ) {\n\t\t\tnode.removeAttribute('aria-hidden');\n\t\t});\n\t}\n\n\t/**\n\t * The default method of hiding a node\n\t * adds aria-hidden\n\t *\n\t * @param nodes\n\t * @private\n\t */\n\tstatic _fnHideNodes( nodes ) {\n\t\t[].forEach.call(nodes, function ( node ) {\n\t\t\tnode.setAttribute('aria-hidden', true);\n\t\t});\n\t}\n\n\t/**\n\t * The default method for matching a node to the searchText\n\t *\n\t * @param node\n\t * @param {String} searchText\n\t * @returns {boolean}\n\t * @private\n\t */\n\tstatic _fnMatchNode( node, searchText ) {\n\t\tsearchText = searchText.toLocaleLowerCase();\n\t\treturn node.innerText.toLocaleLowerCase().indexOf(searchText) > -1;\n\t}\n\n\n\t/**\n\t *\n\t * @param {Event} e\n\t * @private\n\t */\n\t_onFilterChange( e ) {\n\t\tvar me = this,\n\t\t\tsearchText = (typeof me.inputElement.value !== 'undefined') ? me.inputElement.value.trim() : me.inputElement.innerText.trim();\n\t\tme._showFunction(me._filterNodes);\n\t\tthis.filter(searchText);\n\n\t}\n\n\t/**\n\t * filter the nodes using the provided searchText\n\t *\n\t * @param {String} searchText\n\t */\n\tfilter( searchText ) {\n\t\tvar me = this,\n\t\t\tmatchedNodes,\n\t\t\tunmatchedNodes;\n\n\t\tif ( searchText.length > 0 ) {\n\t\t\tmatchedNodes = [].filter.call(me._filterNodes, ( node ) => me._matchFunction(node, searchText));\n\t\t\tunmatchedNodes = me._getUnmatchedNodes(me._filterNodes, matchedNodes);\n\t\t\tme._showFunction(matchedNodes);\n\t\t\tme._hideFunction(unmatchedNodes);\n\t\t\tif ( matchedNodes.length < 1 ) {\n\t\t\t\tme.feedback(me._strings[me.defaultLanguage].feedback.no_results);\n\t\t\t} else {\n\t\t\t\tme.feedback(me._strings[me.defaultLanguage].feedback.default_feedback_message);\n\t\t\t}\n\t\t} else {\n\t\t\tme.feedback(me._strings[me.defaultLanguage].feedback.default_feedback_message);\n\t\t}\n\t}\n\n\t/**\n\t * Add a message to the feeback element\n\t * @param text\n\t */\n\tfeedback( text ) {\n\t\tif (typeof this.feedbackElement !== 'undefined' && this.feedbackElement) {\n\t\t\tthis.feedbackElement.innerHTML = text;\n\t\t}\n\t}\n\n\t_getUnmatchedNodes( nodes, matchedNodes ) {\n\t\tvar result = [];\n\t\t[].forEach.call(nodes, function ( node ) {\n\t\t\tif ( ![].find.call(matchedNodes, function ( matchedNode ) {\n\t\t\t\t\treturn matchedNode === node;\n\t\t\t\t}) ) {\n\t\t\t\tresult.push(node);\n\t\t\t}\n\t\t});\n\t\treturn result;\n\t}\n\n\t/**\n\t *\n\t */\n\tcreateFilterElement() {\n\t\tvar me = this,\n\t\t\tfilterContainer = DomFilter._createNodes(me.replaceStrings(me._config.filterTemplate, me.getLangStrings())),\n\t\t\tappendToNode,\n\t\t\tbeforeNode,\n\t\t\tafterNode;\n\n\n\t\tif ( typeof me._config.insertBefore !== 'undefined' ) {\n\t\t\tbeforeNode = document.querySelector(me._config.insertBefore);\n\t\t\tbeforeNode.parentNode.insertBefore(filterContainer, beforeNode);\n\t\t} else if ( typeof me._config.insertAfter !== 'undefined' ) {\n\t\t\tafterNode = document.querySelector(me._config.insertAfter);\n\t\t\tDomFilter._insertAfter(filterContainer, afterNode);\n\t\t} else if ( typeof me._config.appendTo !== 'undefined' ) {\n\t\t\tappendToNode = document.querySelector(me._config.appendTo);\n\t\t\tappendToNode.appendChild(filterContainer);\n\t\t}\n\n\t\tme.filterContainer = filterContainer;\n\t\tme.inputElement = filterContainer.querySelector(me._config.inputElement);\n\t}\n\n\n\t/**\n\t *\n\t * @param {Element} insertNode\n\t * @param {Element} afterNode\n\t * @private\n\t */\n\tstatic _insertAfter( insertNode, afterNode ) {\n\t\tvar nextNode = afterNode.nextSibling;\n\t\tif ( typeof nextNode !== 'undefined' ) {\n\t\t\tafterNode.parentNode.insertBefore(insertNode, nextNode);\n\t\t} else {\n\t\t\tafterNode.parentNode.appendChild(insertNode);\n\t\t}\n\t}\n\n\t/**\n\t *\n\t * @param html\n\t * @returns {*|Element}\n\t * @private\n\t */\n\tstatic _createNodes( html ) {\n\t\tvar template = document.createElement('template');\n\t\ttemplate.innerHTML = html;\n\t\treturn template.content.firstChild;\n\t}\n\n\t/**\n\t *\n\t * @param {string} filterTemplate\n\t * @param {object} strings\n\t * @returns {string}\n\t */\n\treplaceStrings( filterTemplate, strings ) {\n\t\tfilterTemplate = filterTemplate || '';\n\n\t\tvar regex = /({{([A-Za-z]+[A-Za-z0-9]*?(\\.(?=[A-Za-z])){0,1})+}})/ig;\n\t\treturn filterTemplate.replace(regex, function ( match ) {\n\n\t\t\tmatch = match.replace('{{', '').replace('}}', '');//ugly hack because I need to work on my regexes\n\n\t\t\treturn match.split('.').reduce(function ( a, b ) {\n\t\t\t\treturn a[b];\n\t\t\t}, strings);\n\t\t});\n\n\t}\n}\n"]}