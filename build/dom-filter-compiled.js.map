{"version":3,"sources":["../src/dom-filter.js"],"names":[],"mappings":"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","file":"dom-filter-compiled.js","sourcesContent":["/**\n *\n */\nclass DomFilter {\n\t/**\n\t *\n\t * @param config\n\t */\n\tconstructor( config ) {\n\t\tvar me = this;\n\t\tme._config = config || {};\n\t\tme._config.filterTemplate = me._config.filterTemplate || '<div class=\"element-filter\"><input type=\"text\" placeholder=\"Filter menu\"></div>';\n\t\tme._config.input = me._config.input || '.element-filter input';\n\t\tme._filterNodes = document.querySelectorAll(me._config.filterNodes);\n\t\tme._hideFunction = config.hideFunction || me._fnHideUnmatched;\n\t\tme._showFunction = config.showFunction || me._fnShowUnmatched;\n\t\tme._matchFunction = config.matchFunction || me._fnMatchNode;\n\t\tme.createInput();\n\t\tme.registerListeners();\n\t}\n\n\t/**\n\t *\n\t */\n\tregisterListeners() {\n\t\tvar me = this;\n\t\tme._input.addEventListener('keyup', ( e ) => me._filterChange(e));\n\t}\n\n\t/**\n\t *\n\t * @param nodes\n\t * @private\n\t */\n\t_fnShowUnmatched( nodes ) {\n\t\t[].forEach.call(nodes, function ( node ) {\n\t\t\tnode.removeAttribute('aria-hidden');\n\t\t});\n\t}\n\n\t/**\n\t *\n\t * @param nodes\n\t * @private\n\t */\n\t_fnHideUnmatched( nodes ) {\n\t\t[].forEach.call(nodes, function ( node ) {\n\t\t\tnode.setAttribute('aria-hidden', true);\n\t\t});\n\t}\n\n\t/**\n\t *\n\t * @param node\n\t * @returns {boolean}\n\t * @private\n\t */\n\t_fnMatchNode( node, searchText ) {\n\t\tsearchText = searchText.toLocaleLowerCase();\n\t\treturn node.innerText.toLocaleLowerCase().indexOf(searchText) > -1;\n\t}\n\n\n\t/**\n\t *\n\t * @param {Event} e\n\t * @private\n\t */\n\t_filterChange( e ) {\n\t\tvar me = this,\n\t\t\tsearchText = me._input.value.trim(),\n\t\t\tmatchedNodes,\n\t\t\tunmatchedNodes;\n\t\tme._showFunction(me._filterNodes);\n\n\t\tif ( searchText.length > 0 ) {\n\t\t\tmatchedNodes = [].filter.call(me._filterNodes, ( node ) => me._matchFunction(node, searchText));\n\t\t\tunmatchedNodes = me._getUnmatchedNodes(me._filterNodes, matchedNodes);\n\t\t\tme._showFunction(matchedNodes);\n\t\t\tme._hideFunction(unmatchedNodes);\n\t\t}\n\n\t}\n\n\t_getUnmatchedNodes(nodes, matchedNodes){\n\t\tvar result = [];\n\t\t[].forEach.call(nodes, function(node){\n\t\t\tif ( ![].find.call(matchedNodes, function(matchedNode){\n\t\t\t\treturn matchedNode  === node;\n\t\t\t}) ){\n\t\t\t\tresult.push(node);\n\t\t\t}\n\t\t});\n\t\treturn result;\n\t}\n\n\t/**\n\t *\n\t */\n\tcreateInput() {\n\t\tvar me = this,\n\t\t\tfilterContainer = DomFilter._createNodes(me._config.filterTemplate),\n\t\t\tappendToNode,\n\t\t\tbeforeNode,\n\t\t\tafterNode;\n\n\n\t\tif ( typeof me._config.insertBefore !== 'undefined' ) {\n\t\t\tbeforeNode = document.querySelector(me._config.insertBefore);\n\t\t\tbeforeNode.parentNode.insertBefore(filterContainer, beforeNode);\n\t\t} else if ( typeof me._config.insertAfter !== 'undefined' ) {\n\t\t\tafterNode = document.querySelector(me._config.insertAfter);\n\t\t\tDomFilter._insertAfter(filterContainer, afterNode);\n\t\t} else if ( typeof me._config.appendTo !== 'undefined' ){\n\t\t\tappendToNode = document.querySelector(me._config.appendTo);\n\t\t\tappendToNode.appendChild(filterContainer);\n\t\t}\n\n\t\tme._input = filterContainer.querySelector(me._config.input);\n\t}\n\n\t/**\n\t *\n\t * @param insertNode\n\t * @param afterNode\n\t * @private\n\t */\n\tstatic _insertAfter(insertNode, afterNode){\n\t\tvar nextNode = afterNode.nextSibling;\n\t\tif (typeof nextNode !== 'undefined') {\n\t\t\tafterNode.parentNode.insertBefore(insertNode, afterNode.nextSibling);\n\t\t} else {\n\t\t\tafterNode.parentNode.appendChild(insertNode);\n\t\t}\n\t}\n\n\t/**\n\t *\n\t * @param html\n\t * @returns {*|Node}\n\t * @private\n\t */\n\tstatic _createNodes( html ) {\n\t\tvar template = document.createElement('template');\n\t\ttemplate.innerHTML = html;\n\t\treturn template.content.firstChild;\n\t}\n}\n"]}